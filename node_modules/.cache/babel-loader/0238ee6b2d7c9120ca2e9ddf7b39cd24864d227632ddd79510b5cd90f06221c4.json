{"ast":null,"code":"// src/SendGps.js\nimport React,{useState,useEffect}from'react';import axios from'axios';import'./SendGps.css';// Asegúrate de tener este archivo con los estilos\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SendGps=()=>{const[latitude,setLatitude]=useState('');const[longitude,setLongitude]=useState('');const[phoneId,setPhoneId]=useState('');const[error,setError]=useState('');const[success,setSuccess]=useState('');// Validar coordenadas\nconst validateCoordinates=()=>{if(!latitude||!longitude||!phoneId){setError('Por favor, complete todos los campos.');return false;}if(isNaN(latitude)||isNaN(longitude)){setError('Las coordenadas deben ser números válidos.');return false;}return true;};// Obtener geolocalización del dispositivo móvil\nconst getLocation=()=>{console.log(\"Intentando obtener ubicación...\");if(navigator.geolocation){navigator.geolocation.getCurrentPosition(position=>{console.log('Ubicación obtenida:',position);setLatitude(position.coords.latitude);setLongitude(position.coords.longitude);},err=>{console.error('Error de geolocalización:',err);setError('No se pudo obtener la ubicación del dispositivo. Verifica los permisos.');},{enableHighAccuracy:true,timeout:10000,maximumAge:0});}else{console.error('Geolocalización no soportada por este navegador');setError('Geolocalización no es soportada por este navegador.');}};const handleSubmit=async e=>{e.preventDefault();setError('');setSuccess('');// Validación\nif(!validateCoordinates())return;const data={latitude:parseFloat(latitude),longitude:parseFloat(longitude),sent_at:new Date().toISOString(),phone_identifier:phoneId};console.log('Sending data:',data);try{const response=await axios.post('http://localhost:5000/api/gps',data);console.log('Response from server:',response.data);setSuccess('Punto GPS enviado exitosamente');setLatitude('');setLongitude('');setPhoneId('');}catch(error){console.error('Error sending GPS data:',error);setError('Hubo un error al enviar la ubicación. Intenta nuevamente.');}};useEffect(()=>{if(window.innerWidth<=768){getLocation();}},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"send-gps-container\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"send-gps-form\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Phone ID\",value:phoneId,onChange:e=>setPhoneId(e.target.value),className:\"input-field\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"Latitude\",value:latitude,onChange:e=>setLatitude(e.target.value),className:\"input-field\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"Longitude\",value:longitude,onChange:e=>setLongitude(e.target.value),className:\"input-field\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"submit-button\",children:\"Enviar Ubicaci\\xF3n\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),success&&/*#__PURE__*/_jsx(\"div\",{className:\"success-message\",children:success})]});};export default SendGps;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","SendGps","latitude","setLatitude","longitude","setLongitude","phoneId","setPhoneId","error","setError","success","setSuccess","validateCoordinates","isNaN","getLocation","console","log","navigator","geolocation","getCurrentPosition","position","coords","err","enableHighAccuracy","timeout","maximumAge","handleSubmit","e","preventDefault","data","parseFloat","sent_at","Date","toISOString","phone_identifier","response","post","window","innerWidth","className","children","onSubmit","type","placeholder","value","onChange","target"],"sources":["F:/Progra/gps-app/frontend/src/SendGps.js"],"sourcesContent":["// src/SendGps.js\r\nimport React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport './SendGps.css'; // Asegúrate de tener este archivo con los estilos\r\n\r\nconst SendGps = () => {\r\n  const [latitude, setLatitude] = useState('');\r\n  const [longitude, setLongitude] = useState('');\r\n  const [phoneId, setPhoneId] = useState('');\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState('');\r\n\r\n  // Validar coordenadas\r\n  const validateCoordinates = () => {\r\n    if (!latitude || !longitude || !phoneId) {\r\n      setError('Por favor, complete todos los campos.');\r\n      return false;\r\n    }\r\n    if (isNaN(latitude) || isNaN(longitude)) {\r\n      setError('Las coordenadas deben ser números válidos.');\r\n      return false;\r\n    }\r\n    return true;\r\n  };\r\n\r\n  // Obtener geolocalización del dispositivo móvil\r\n  const getLocation = () => {\r\n    console.log(\"Intentando obtener ubicación...\");\r\n    if (navigator.geolocation) {\r\n      navigator.geolocation.getCurrentPosition(\r\n        (position) => {\r\n          console.log('Ubicación obtenida:', position);\r\n          setLatitude(position.coords.latitude);\r\n          setLongitude(position.coords.longitude);\r\n        },\r\n        (err) => {\r\n          console.error('Error de geolocalización:', err);\r\n          setError('No se pudo obtener la ubicación del dispositivo. Verifica los permisos.');\r\n        },\r\n        {\r\n          enableHighAccuracy: true,\r\n          timeout: 10000, \r\n          maximumAge: 0, \r\n        }\r\n      );\r\n    } else {\r\n      console.error('Geolocalización no soportada por este navegador');\r\n      setError('Geolocalización no es soportada por este navegador.');\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setError('');\r\n    setSuccess('');\r\n\r\n    // Validación\r\n    if (!validateCoordinates()) return;\r\n\r\n    const data = {\r\n      latitude: parseFloat(latitude),\r\n      longitude: parseFloat(longitude),\r\n      sent_at: new Date().toISOString(),\r\n      phone_identifier: phoneId,\r\n    };\r\n\r\n    console.log('Sending data:', data); \r\n\r\n    try {\r\n      const response = await axios.post('http://localhost:5000/api/gps', data);\r\n      console.log('Response from server:', response.data); \r\n      setSuccess('Punto GPS enviado exitosamente');\r\n      setLatitude('');\r\n      setLongitude('');\r\n      setPhoneId('');\r\n    } catch (error) {\r\n      console.error('Error sending GPS data:', error); \r\n      setError('Hubo un error al enviar la ubicación. Intenta nuevamente.');\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (window.innerWidth <= 768) { \r\n      getLocation();\r\n    }\r\n  }, []); \r\n\r\n  return (\r\n    <div className=\"send-gps-container\">\r\n      <form onSubmit={handleSubmit} className=\"send-gps-form\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Phone ID\"\r\n          value={phoneId}\r\n          onChange={(e) => setPhoneId(e.target.value)}\r\n          className=\"input-field\"\r\n        />\r\n        <input\r\n          type=\"number\"\r\n          placeholder=\"Latitude\"\r\n          value={latitude}\r\n          onChange={(e) => setLatitude(e.target.value)}\r\n          className=\"input-field\"\r\n        />\r\n        <input\r\n          type=\"number\"\r\n          placeholder=\"Longitude\"\r\n          value={longitude}\r\n          onChange={(e) => setLongitude(e.target.value)}\r\n          className=\"input-field\"\r\n        />\r\n        <button type=\"submit\" className=\"submit-button\">Enviar Ubicación</button>\r\n      </form>\r\n\r\n      {error && <div className=\"error-message\">{error}</div>}\r\n      {success && <div className=\"success-message\">{success}</div>}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SendGps;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}